---
import type { Project } from '../data/site';

type Props = {
	project: Project;
	variant?: 'compact' | 'full';
};

const { project, variant = 'full' } = Astro.props;
const isFull = variant === 'full';
---

<article
	id={project.slug}
	class="grid-panel overflow-hidden"
>
	<div class="grid gap-0">
		<header class="grid grid-cols-1 gap-2 border-b border-[rgb(var(--border))] p-5 sm:grid-cols-[1fr_auto] sm:items-baseline">
			<h3 class="mono text-base font-semibold tracking-tight text-[rgb(var(--fg))]">{project.name}</h3>
			<p class="text-sm text-[rgb(var(--muted))]">{project.role}</p>
			<p class="sm:col-span-2 text-sm leading-6 text-[rgb(var(--muted))]">{project.oneLiner}</p>
		</header>

		{isFull && (
			<div class="grid border-b border-[rgb(var(--border))] sm:grid-cols-2">
				<div class="p-5 sm:border-r sm:border-[rgb(var(--border))]">
					<p class="mono text-xs font-semibold uppercase tracking-wider text-[rgb(var(--fg))]">
						Challenges / tradeoffs
					</p>
					<ul class="mt-3 list-disc space-y-1.5 pl-4 text-sm leading-6 text-[rgb(var(--muted))]">
						{project.challenges.map((c) => (
							<li>{c}</li>
						))}
					</ul>
				</div>

				<div class="p-5">
					<p class="mono text-xs font-semibold uppercase tracking-wider text-[rgb(var(--fg))]">Tech</p>
					<div class="mt-3 flex flex-wrap gap-2">
						{project.tech.map((t) => (
							<span class="border border-[rgb(var(--border))] bg-[rgb(var(--bg))] px-2.5 py-1 text-xs text-[rgb(var(--muted))]">
								{t}
							</span>
						))}
					</div>

					{project.impact?.length ? (
						<div class="mt-4">
							<p class="mono text-xs font-semibold uppercase tracking-wider text-[rgb(var(--fg))]">
								Impact
							</p>
							<ul class="mt-3 list-disc space-y-1.5 pl-4 text-sm leading-6 text-[rgb(var(--muted))]">
								{project.impact.map((m) => (
									<li>{m}</li>
								))}
							</ul>
						</div>
					) : null}
				</div>
			</div>
		)}

		{project.links?.length ? (
			<footer class="flex flex-wrap gap-2 p-5">
				{project.links.map((l) => (
					<a
						class="btn-pressdown focus-ring inline-flex items-center gap-2 border border-[rgb(var(--border))] bg-[rgb(var(--bg))] px-3 py-2 text-sm text-[rgb(var(--fg))] no-underline hover:border-[rgb(var(--accent))]"
						href={l.href}
						target={l.href.startsWith('http') ? '_blank' : undefined}
						rel={l.href.startsWith('http') ? 'noreferrer' : undefined}
					>
						{l.label}
						<span class="mono text-xs text-[rgb(var(--muted))]">â†—</span>
					</a>
				))}
			</footer>
		) : null}
	</div>
</article>


