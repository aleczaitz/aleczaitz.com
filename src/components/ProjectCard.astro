---
import type { Project } from '../data/site';

type Props = {
	project: Project;
	variant?: 'compact' | 'full';
};

const { project, variant = 'full' } = Astro.props;
const isFull = variant === 'full';
---

<article
	id={project.slug}
	class="rounded-2xl border border-[rgb(var(--border))] bg-[rgb(var(--card))] p-5 shadow-sm"
>
	<header class="flex flex-wrap items-baseline justify-between gap-2">
		<h3 class="mono text-base font-semibold tracking-tight text-[rgb(var(--fg))]">{project.name}</h3>
		<p class="text-sm text-[rgb(var(--muted))]">{project.role}</p>
	</header>

	<p class="mt-3 text-sm leading-6 text-[rgb(var(--muted))]">{project.oneLiner}</p>

	{isFull && (
		<div class="mt-4 grid gap-4 sm:grid-cols-2">
			<div class="space-y-2">
				<p class="mono text-xs font-semibold uppercase tracking-wider text-[rgb(var(--fg))]">
					Challenges / tradeoffs
				</p>
				<ul class="list-disc space-y-1 pl-4 text-sm text-[rgb(var(--muted))]">
					{project.challenges.map((c) => (
						<li>{c}</li>
					))}
				</ul>
			</div>

			<div class="space-y-2">
				<p class="mono text-xs font-semibold uppercase tracking-wider text-[rgb(var(--fg))]">Tech</p>
				<div class="flex flex-wrap gap-2">
					{project.tech.map((t) => (
						<span class="rounded-full border border-[rgb(var(--border))] bg-[rgb(var(--bg))] px-2.5 py-1 text-xs text-[rgb(var(--muted))]">
							{t}
						</span>
					))}
				</div>

				{project.impact?.length ? (
					<div class="mt-3 space-y-2">
						<p class="mono text-xs font-semibold uppercase tracking-wider text-[rgb(var(--fg))]">
							Impact
						</p>
						<ul class="list-disc space-y-1 pl-4 text-sm text-[rgb(var(--muted))]">
							{project.impact.map((m) => (
								<li>{m}</li>
							))}
						</ul>
					</div>
				) : null}
			</div>
		</div>
	)}

	{project.links?.length ? (
		<footer class="mt-5 flex flex-wrap gap-3">
			{project.links.map((l) => (
				<a
					class="focus-ring inline-flex items-center gap-2 rounded-md border border-[rgb(var(--border))] bg-[rgb(var(--bg))] px-3 py-2 text-sm text-[rgb(var(--fg))] no-underline hover:border-[rgb(var(--accent))]"
					href={l.href}
					target={l.href.startsWith('http') ? '_blank' : undefined}
					rel={l.href.startsWith('http') ? 'noreferrer' : undefined}
				>
					{l.label}
					<span class="mono text-xs text-[rgb(var(--muted))]">â†—</span>
				</a>
			))}
		</footer>
	) : null}
</article>


